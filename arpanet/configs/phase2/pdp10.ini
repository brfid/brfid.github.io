; SIMH PDP-10 KS Configuration - ITS
; Phase2: ARPANET host for file transfer testing
;
; This PDP-10 connects to IMP via network interface (UDP 2000)

set debug stdout

; Configure CPU
set console wru=034

; ITS-specific CPU and memory configuration
set cpu its
; set cpu 2048k
; NOTE: disabled by default; some pdp10-ks builds reject this parameter
; and abort before boot. Re-enable only after validating accepted syntax
; via: show version / show devices / help set cpu inside the runtime image.
set tim y2k

; Console and terminal multiplexer
; Keep console on stdio for stability. Current pdp10-ks exits
; after boot if no telnet console client attaches quickly.
set console notelnet
set dz enable
set dz lines=8
attach dz 10004

; Configure disk drive (RP = RP06) for ITS system disk
; KS-10 simulator uses RPA devices (RPA0..RPA7), not RP0
set rpa enable
set rpa0 enable
set rpa0 rp06
attach rpa0 /machines/data/its.dsk

; IMP Network Interface for ARPANET connection
; This is the PDP-10's network interface that connects to IMP at 172.20.0.50
set imp enabled
; Keep static addressing to avoid DHCP dependency/noise during
; host-link debugging. UNI/SIMP toggles are tested explicitly
; in runtime experiments; baseline remains SIMP + NODHCP.
set imp simp
set imp ip=172.20.0.40/16
set imp gw=172.20.0.1
set imp host=172.20.0.40
set imp nodhcp
set imp debug
; Attach IMP interface via SIMH UDP bridge
; Local UDP 2000 <-> remote 172.20.0.50:2001
attach imp udp:2000:172.20.0.50:2001

echo PDP-10 ITS starting...
echo IMP network interface: 172.20.0.40:2000 <-> IMP at 172.20.0.50:2001
echo Console on stdio (telnet disabled for stability)
echo DZ lines attached on port 10004
echo System disk: /machines/data/its.dsk on RPA0
echo
echo Booting ITS from disk...
echo Connect via: telnet localhost 2326
echo

; Boot from system disk
; SIMH will wait for console connection before proceeding
boot rpa0
