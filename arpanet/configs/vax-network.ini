; SIMH VAX/BSD Configuration for Production Deployment
; Direct TCP/IP connection to PDP-11 (no IMPs)
;
; Based on the jguillaumes/simh-vaxbsd image default config
; Enhanced with DEC Ethernet (DEUNA) for Docker bridge networking
;
; Network: 172.20.0.0/16
; VAX: 172.20.0.10
; PDP-11: 172.20.0.50

; Load the base system
load /usr/local/lib/simh/VAX/ka780_bin.bin

; CPU and memory configuration
set cpu 64m
set cpu idle=vms

; Enable and attach console
set console telnet=2323

; DEC RL02 disk drives (system disks from base image)
set rl0 rl02
attach rl0 /usr/local/lib/simh/VAX/rl02.1.vax.dsk
set rl1 rl02
attach rl1 /usr/local/lib/simh/VAX/rl02.2.vax.dsk

; TU58 tape cartridge
set tu enabled
attach tu /usr/local/lib/simh/VAX/tu58.dat

; TS11 tape drive for file transfer to/from host
set ts enabled
; Note: inputs.tap will be attached dynamically by vax_stage.py if present
; attach ts0 /machines/inputs.tap

; DEC Ethernet (DEUNA) - Direct TCP/IP connection
; The XU device provides Ethernet connectivity via Docker network
; No IMPs - VAX â†” PDP-11 communicate directly via TCP/IP
set xu enabled
set xu mac=08:00:2b:aa:bb:cc

; Attach to Docker bridge network (eth0)
; This enables direct TCP/IP communication with PDP-11 at 172.20.0.50
attach xu eth0

; Boot the system
; The VAX will boot from RL0 and start 4.3BSD
boot cpu
