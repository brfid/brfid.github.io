; SIMH Automation: Network Configuration
; Configures VAX network interface automatically
;
; Usage: docker exec arpanet-vax /usr/bin/simh-vax /machines/data/configure-network.ini

set cpu 64m
set cpu idle
attach dz 2323
attach xu eth0
set xu mac=08:00:2b:aa:bb:cc

; Boot BSD
boot cpu

; Login as root
go until "login:"
send delay=1000 "root\r"
go until "#"

; Configure network interface
send "/etc/ifconfig de0 172.20.0.10 netmask 255.255.0.0 up\r"
go until "#"

; Verify configuration
send "/etc/ifconfig de0\r"
go until "#"

; Test network with ping
send "ping -c 3 172.20.0.20\r"
go until "#"

; Show routing table
send "netstat -rn\r"
go until "#"

; Exit
send "exit\r"

; Exit SIMH
exit
