; SIMH Automation: Build Artifact Transfer via ARPANET FTP
; Uses BSD 4.3 native FTP client/server (1986) to transfer built artifacts.
;
; Expected source artifact in VAX shared volume:
;   /machines/data/resume.pdf
;
; Destination inside guest:
;   /tmp/resume-via-arpanet.pdf

set cpu 64m
set cpu idle
attach dz 2323
attach xu eth0
set xu mac=08:00:2b:aa:bb:cc

; Boot BSD
boot cpu

; Login as root
go until "login:"
send delay=1000 "root\r"
go until "#"

; Validate source artifact exists
send "ls -l /machines/data/resume.pdf\r"
go until "#"

; Start FTP session
send "ftp localhost\r"
go until "Name"

; Authenticate
send "operator\r"
go until "Password:"
send "test123\r"
go until "230"

; Binary mode for PDFs/binaries
send "binary\r"
go until "ftp>"

; Upload build artifact
send "put /machines/data/resume.pdf /tmp/resume-via-arpanet.pdf\r"
go until "226"

; Exit FTP
send "quit\r"
go until "#"

; Verify destination file
send "ls -l /tmp/resume-via-arpanet.pdf\r"
go until "#"

; Basic integrity signal
send "cmp /machines/data/resume.pdf /tmp/resume-via-arpanet.pdf\r"
go until "#"

; Completion marker
send "echo '=== BUILD ARTIFACT FTP TRANSFER COMPLETE ==='\r"
go until "#"

; Exit shell and SIMH
send "exit\r"
exit
