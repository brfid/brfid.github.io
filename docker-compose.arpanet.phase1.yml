# ARPANET Build Integration - Phase1
# Generated from arpanet/topology/definitions.py - DO NOT EDIT MANUALLY
# To regenerate: arpanet-topology phase1
#
# Topology: [VAX/BSD] <-> [IMP #1]

version: '3.8'
services:
  vax:
    container_name: arpanet-vax
    hostname: vax-host
    image: jguillaumes/simh-vaxbsd@sha256:1bab805b25a793fd622c29d3e9b677b002cabbdc20d9c42afaeeed542cc42215
    ports:
    - 2323:2323
    volumes:
    - ./build/vax/simh-tape:/machines
    networks:
      arpanet:
        ipv4_address: 172.20.0.10
    environment:
    - SIMH_NETWORK=enabled
    restart: unless-stopped
  imp1:
    container_name: arpanet-imp1
    hostname: imp-1
    build:
      context: ./arpanet
      dockerfile: Dockerfile.imp
    ports:
    - 2324:2323
    volumes:
    - ./build/arpanet/imp1:/machines/data
    - ./arpanet/configs/imp-phase1.ini:/machines/imp.ini:ro
    - ./arpanet/configs/impcode.simh:/machines/impcode.simh:ro
    - ./arpanet/configs/impconfig.simh:/machines/impconfig.simh:ro
    networks:
      arpanet:
        ipv4_address: 172.20.0.20
    environment:
    - IMP_NUMBER=1
    - HOST_LINK_0=172.20.0.10:2000
    restart: unless-stopped
    depends_on:
    - vax
networks:
  arpanet:
    name: arpanet-build
    driver: bridge
    ipam:
      config:
      - subnet: 172.20.0.0/16
        gateway: 172.20.0.1
